# 题目1

### 思路

* #### 对浏览器进行抓包，查看一次完整的物流查询的所有必须的网络请求，使用Python模拟浏览器访问，拿到数据

### 题目需要注意的难点和问题

* #### 查询访问需携带cookie
* #### 查询请求的数据格式非常特殊,需要仔细抓包研究构建正确的请求体
* #### 网站是http2协议,在http1.1情况下会有问题,这个时候需要选择支持HTTP2的网络请求库(注：暂未确定http1.1是否一定完全无法访问)
* #### 当SSL证书校验错误时，网站会返回一个验证码，需填写验证码后访问

### 程序运行方式

* #### 1.不断循环从控制台中读取 物流单号 进行查询,查询结果并保存到 项目目录下json_data_dir中，文件命名规则为{物流单号}_{时间戳.json}
    * 根据程序提示不断输入需要查询的code即可

* #### 2.程序根据Excel中的物流单号批量进行查询
    * #### 此模式运行需要一个填写物流单号的Excel文件,Excel第一行标题填入code 后续行填写需要抓取的code ,Excel表格式如下 (注：当前版本程序只会读取Sheet1中的物流单号信息)

| code  |  
| --------   | 
| LX679316884US |
| LX679316884CN |

# 题目2

### 题目思路和难点

* ### 思路
    * #### ①网站通过post请求上传一个图片后会返回图片的hash和file_key,浏览器拿到file_key后发起一个XHR请求，进行查询，返回查询结果
    * #### ②查询返回的url格式是类base64或aes加密的结果,这个时候就有2种可能，1是网页里面的JavaScript代码对这段url进行还原,2.URL的还原代码不在网页端，需要访问服务器获取到最终的商品链接
        * 此网站每次都会从服务器查询，进过多次重定向后，会返回最终的url地址
* ### 难点
    * #### 通过Python模拟 浏览器发送 boundary=----WebKitFormBoundary***的文件上传请求
        *
      参考资料[链接](https://stackoverflow.com/questions/51349340/recreate-post-request-with-webkitformboundary-using-pythons-requests)
    * #### 查询接口有签名校验，会对时间戳加盐后哈希并将值发送到服务器校验
        * 1.可以将接口签名的代码提取出来，用Python调用生成签名 2.可以用Python实现对应的签名逻辑(本题采用此方式)

### 程序运行方式

* #### 程序比较简单直接调用search_product_by_img 函数 传入一个需要查询的图片地址即可，程序查询后会将数据保存到json文件中

# 其它题目

### 题目3 （时间不足并未做起，简单说下思路）

* mongodb默认安装是没有用户密码的，以前刚开始用这个数据库时没有设置密码，被勒索病毒攻击，需要提供0.5个比特币解锁数据，所以映像比较深刻，但是设置密码的方法好久没有用暂时已经想不起来了，通过互联网查询资料后可以解决
* 题目3第二部分，主要就是要做到方便及时修改匹配模式，而不是写死，在匹配模式存储上设计2个数组，一个表示包含关键词，一个表现不包含关键词，然后再添加一个字段标记生效时间，然后编码的过程中要尽量考虑匹配的性能，以及改动匹配数据时需要加锁，避免多个用户同时修改出错

### 题目4 （并未完成，但是按照以下的思路去做，应该是可以完成）

* 安装node.js 及npm
* npm 安装puppeteer,及初始化puppeteer(下载chromium)
* 查看官方文档示例，或将Python中pyppeteer中对浏览器相关操作翻译到nodejs中
* 运行相关js代码即可